% clc
% clear all
% close all

pathDataFolder = '..\myRealData\TransportationNetworks\';
name1 = 'SimpleGeneralNetwork';
name2 = 'SiouxFalls';

nameNetwork = name1;
G = ParseTNTP(pathDataFolder, nameNetwork);
PlotNetwork(G);

ODs = [1, 4, 1.0;
       1, 4, 2.0];
[A, b] = GetEqualityConstraints(G, ODs);

numEdge = G.numedges;
numNode = G.numnodes;
numDmnd = size(ODs, 1);

xFull = sdpvar(numEdge*(numDmnd+1), 1);
xLink = xFull(1:numEdge, 1);

FFT = G.Edges.FreeFlowTime;
B = G.Edges.B;
Pow = G.Edges.Power;
Cap = G.Edges.Capacity;

CapPow = Cap .^ Pow;
CoeffPoly = FFT .* B ./ ((Pow + 1) .* CapPow);
CoeffLin = FFT;
intCost = CoeffLin .* xLink + CoeffPoly .* xLink .^ Pow;

Constraints = [A * xFull == b, 
